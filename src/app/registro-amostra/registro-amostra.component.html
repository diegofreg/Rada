<mat-tab-group>
	<mat-tab label="Registro de Amostra">
		<div class="wrapper_tab_content ">
			<div class="container">
				<span class="title_input" *ngIf="!finalizado;else foiFinalizado">Pesquisar por*</span>
				<mat-radio-group aria-label=Select color="primary" [(ngModel)]="tipoPesquisa" *ngIf="!finalizado">
					<mat-radio-button value="Conforme" class="radio" [checked]="true" >N° do Lacre</mat-radio-button>
					<mat-radio-button value="Não Conforme" class="radio" >Termo de Coleta</mat-radio-button>
				</mat-radio-group>
				<div style="display: flex;align-items:center ;" *ngIf="!finalizado">
					<mat-form-field appearance="fill" style="width: 30%;" class="mat-form-field-fiscalizado">
						<mat-label>Pesquisar</mat-label>
						<input type="text" matInput name="nomefantasia" autocomplete="off" [(ngModel)]="numero">
						<mat-hint></mat-hint>
					</mat-form-field>
          <button mat-flat-button color="primary" class="button" (click)="pesquisar()">Pesquisar</button>
				</div>
				<ng-template #foiFinalizado >
					<div class="numero_registro">
						Número do Registro de Amostra: {{codigoRetornado}} 
					</div>
				</ng-template>
				<span class="title_input">Dados da Coleta</span>
				<div style="width: 60%;">
					<mat-form-field appearance="fill" style="width:30%;margin: 15px;" >
						<mat-label>Data*</mat-label>
						<input matInput disabled="" [value]="data">
					</mat-form-field>
					<mat-form-field appearance="fill" class="inputFieldMed" style="width:30%">
						<mat-label>
							Hora*
						</mat-label>
						<input  id="horas" name="myName" matInput 	[value]="hora" disabled="">
					</mat-form-field>
				</div>
				<div class="table">
					<div style="display: flex;align-items: center;justify-content: space-between;"  *ngFor="let dado of dados">
						<div style="width: 100%;"> 
							<mat-form-field appearance="fill" style="width: 100%;" class="mat-form-field-fiscalizado">
								<mat-label>Cultura</mat-label>
									<input type="text" matInput name="nomefantasia" autocomplete="off" disabled  [value]="dado.idCultura">
							</mat-form-field>
							<div style="width: 70%;display: flex;align-items: center;justify-content: flex-start;">
								<mat-form-field appearance="fill" style="width: 15%;" class="mat-form-field-fiscalizado">
									<mat-label>Variedade</mat-label>
									<input type="text" matInput name="nomefantasia" disabled autocomplete="off"  [value]="dado.idVariedade">
								</mat-form-field>
								<mat-form-field appearance="fill" style="width: 30%;" class="mat-form-field-fiscalizado">
									<mat-label>Lacre(s)</mat-label>
									<div style="display: flex;align-items: center">
										<div *ngFor="let lacre of lacres, let i = index" >
											<input type="text" matInput name="nomefantasia"  disabled autocomplete="off" value="{{lacre}}" >
										</div>
									</div>
									<mat-hint></mat-hint>
								</mat-form-field>
								<mat-form-field appearance="fill" style="width: 20%;" class="mat-form-field-fiscalizado">
									<mat-label>Quantidade Recebida (Gramas)</mat-label>
									<input type="text" matInput name="nomefantasia" autocomplete="off"   [value]="" (change)="setGramas($event)" [disabled]="finalizado">
								</mat-form-field>
								<mat-form-field appearance="fill" style="width: 20%;" class="mat-form-field-fiscalizado">
									<mat-label>Quantidade Recebida (Unidades)</mat-label>
									<input type="text" matInput name="nomefantasia" autocomplete="off" (change)="setUnidade($event)"  [value]="" [disabled]="finalizado">
									<mat-hint></mat-hint>
								</mat-form-field>
						</div>

						</div>
					</div>
					<div  *ngIf="dados.length == 0"> 
						<mat-form-field appearance="fill" style="width: 100%;" class="mat-form-field-fiscalizado">
							<mat-label>Cultura</mat-label>
								<input type="text" matInput name="nomefantasia" autocomplete="off" disabled  >
						</mat-form-field>
						<div style="width: 70%;display: flex;align-items: center;justify-content: flex-start;">
							<mat-form-field appearance="fill" style="width: 15%;" class="mat-form-field-fiscalizado">
								<mat-label>Variedade</mat-label>
								<input type="text" matInput name="nomefantasia" disabled autocomplete="off"   >
							</mat-form-field>
							<mat-form-field appearance="fill" style="width: 15%;" class="mat-form-field-fiscalizado">
								<mat-label>Lacre(s)</mat-label>
								<input type="text" matInput name="nomefantasia"  disabled autocomplete="off"  >
								<mat-hint></mat-hint>
							</mat-form-field>
							<mat-form-field appearance="fill" style="width: 40%;" class="mat-form-field-fiscalizado">
								<mat-label>Quantidade Recebida (Gramas)</mat-label>
								<input type="text" matInput name="nomefantasia" autocomplete="off" disabled  >
							</mat-form-field>
							<mat-form-field appearance="fill" style="width: 40%;" class="mat-form-field-fiscalizado">
								<mat-label>Quantidade Recebida (Unidades)</mat-label>
								<input type="text" matInput name="nomefantasia" autocomplete="off"  disabled >
								<mat-hint></mat-hint>
							</mat-form-field>
					</div>

					</div>
				</div>
				<hr>
				<span class="title_input">Dados de Entrada no Laborátorio</span>
				<div style="width: 60%;">
					<mat-form-field appearance="fill" style="width:30%;margin: 15px;" >
						<mat-label >Data*</mat-label>
						<input matInput [matDatepicker]="picker2" [disabled]="finalizado" [(ngModel)]="dadosEntrada.dataEntrada" >
						<mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
						<mat-datepicker #picker2></mat-datepicker>
					</mat-form-field>
					<mat-form-field appearance="fill" class="inputFieldMed" style="width:30%">
						<mat-label>
							Hora*
						</mat-label>
						<input  id="horas" name="myName" [disabled]="finalizado" matInput type="time"	value=`${data.mission.loadDate.getHours()}:${data.mission.loadDate.getMinutes()}` [(ngModel)]="dadosEntrada.horaEntrada">
					</mat-form-field>
				</div>
				<hr>
				<span class="title_input">Análise Crítica</span>
				<mat-radio-group aria-label=Select [(ngModel)]="clickedButton" color="primary" [disabled]="finalizado">
					<mat-radio-button value="Conforme" class="radio" >Conforme</mat-radio-button>
					<mat-radio-button value="Não Conforme" class="radio" >Não Conforme</mat-radio-button>
				</mat-radio-group>
				<section *ngIf="clickedButton == 'Conforme'" [formGroup]="analiseGrupo">
					<hr>
					<span class="title_input">Grupos de Análise</span>
					<div class="wrapper_checks">
						<mat-checkbox class="checkbox" color="primary" formControlName="inseticidasPiretroides" [disabled]="finalizado">Inseticidas piretroides</mat-checkbox>
						<div class="wrapper_left_check">
							<mat-checkbox class="checkbox_left" color="primary" formControlName="inseticidasOrganoclorados" [disabled]="finalizado">Inseticidas organoclorados</mat-checkbox>
							<mat-checkbox color="primary" class="checkbox_left" formControlName="inseticidasOrganofosforados" [disabled]="finalizado">Inseticidas organofosforados</mat-checkbox>
						</div>
					</div>
					<div class="wrapper_checks">
						<mat-checkbox class="checkbox"  color="primary" formControlName="fungicidasDitiocarbamatos" [disabled]="finalizado">Fungicidas ditiocarbamatos</mat-checkbox>
						<div class="wrapper_left_check">
							<mat-checkbox class="checkbox_left" color="primary" formControlName="fungicidasTriazóis" [disabled]="finalizado">Fungicidas triazóis</mat-checkbox>
							<mat-checkbox class="checkbox_left" color="primary" formControlName="fungicidasDicarboximida" [disabled]="finalizado">Fungicidas dicarboximida</mat-checkbox>
							<mat-checkbox class="checkbox_left" color="primary" formControlName="Outros" [disabled]="finalizado">Outros</mat-checkbox>
						</div>
					</div>
				</section>
				<hr>
				<mat-form-field appearance="fill" style="width:100%">
                    <mat-label>Observações</mat-label>
                    <textarea matInput formControlName ='obs'></textarea>
             </mat-form-field>
				<!--<mat-form-field appearance="fill" style="width: 30%;" class="mat-form-field-fiscalizado">
					
					<mat-label>Observações</mat-label>
					<input type="text" matInput name="nomefantasia" autocomplete="off" [(ngModel)] = "model.dsObservacao" [disabled]="finalizado">
					<mat-hint></mat-hint>
				</mat-form-field>-->
				<span class="title_input">Identificação do Analista</span>
				<mat-form-field appearance="fill" style="width: 30%;" class="mat-form-field-fiscalizado">
					<mat-label>Nome</mat-label>
					<input type="text" matInput name="nomefantasia" autocomplete="off"  [(ngModel)] = "model.nomeAnalista" [disabled]="finalizado">
					<mat-hint></mat-hint>
				</mat-form-field>
				<div class="action">          
		  
				</div>
			</div>
		</div>
		<hr>
		<div style="width: 100%; display: flex;align-items: center;justify-content: flex-end;">
			<button mat-flat-button color="primary" class="button" (click)="finalize()">{{finalizado ? 'Novo' : 'Finalizar'}}</button>
		  </div>	  
	</mat-tab>
</mat-tab-group>

